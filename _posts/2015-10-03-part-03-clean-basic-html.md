---
layout: post
title: "Part 4: Clean Basic HTML"
date: 2015-10-03
description: "Stripping out the basic HTML and starting with a clean and well understood structure."
---

## Strip to Minimal HTML

The default Jekyll site starts out with the following HTML files:

```
/about.md
/index.html
/_includes/
    footer.html
    head.html
    header.html
/_layouts/
    default.html
    page.html
    post.html
```

Each page made with Jekyll uses a pre-defined layout that you create.
This is a straight forward way to make templates that can be updated at any time, re-generating the corresponding pages.

The includes are for sections of pages that may be common to multiple layouts.
It can also be a nice way to logically separate different chunks of the document template for easy maintenance.

Start by deleting `/about.md`, `/header.html`, `/footer.html` and `/page.html`.
They will be re-created later as needed.


## No CSS (yet)

Delete the `/css/` and `/_sass/` directories.
To begin with the page will rely entirely on the browser's own CSS (browsers use CSS internally to implement default styles).

It is a good sign if a site makes sense using only the default browser stylesheet.
Although it is nice to use good style to improve the readability and experience of a page, __it should not rely on custom style to convey information__.
Reliance on style creates difficulty when attempting to deliver the content in different contexts.
For accessibility purposes, style does not translate to speech very easily.
People with sight issues may rely on simplified stylesheets ([check this out](http://people.ds.cam.ac.uk/ssb22/css/?whatLookLike)) that cannot interpret custom style nuances.


## HTML5 and the Spec

In an attempt to work with the most up-to-date HTML5 standard, references will be made to the _[HTML 5.1 W3C Working Draft 03 October 2015](http://www.w3.org/TR/2015/WD-html51-20151003/)_, which is the most recent version as of writing. Freezing on this version allowing any links made to it to be reliable.

The spec is continuously changing and being updated in a somewhat chaotic process; all the major browser companies tend to uniquely implement features according to their own interpretation and needs. As a result things get revised and specified in different ways by different people, resulting in a slow and messy progress. However this is not entirely bad, this means that ideas get tested and proven in the real world driving progress.

What this means to this project is that _good HTML5_ is not a perfect concept set in stone. Compromises and hacks have to be made to ensure compatibility and consistency in appearance.


## The HEAD

The head of a HTML file is used for metadata.
This is quite important as some of the metaadata tags can alter the way the browser displays the page.
The head meta also affect how search engines look at the page; while this project is not particularly concerned with SEO, it is nice to have thing appear appropriately when they do appear in search results.

The default `/head.html` generated by Jekyll is mostly kept intact. A few of the extra variable options have been removed because they add unnecessary complication. 

```html
{% raw %}<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ page.description }}">

  <title>{{ page.title }}</title>

  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}" />
</head>{% endraw %}
```


### Line by Line Analysis of the Head

Charset information required in HTML5, UTF-8 has wide language support and seems to be universally supported for everything internet: `<meta charset="utf-8">`{: .highlight .language-html} 


A meta tag is required to prevent Internet Explorer from suggesting or using compatibility mode;
It will use the mode up-to-date standard mode, with (hopefully) less quirks:

```html
<meta http-equiv="X-UA-Compatible" content="IE=edge">
```

This is used to allow proper scaling and layout on mobile phones. `width=device-width` tells the mobile phone that the intended width of the page should match the device. This is a good default for a blog where the content should wrap inside the screen, maintaining the sensible default text size. This should probably be changed if a exact pixel width layout is used (not recommended unless aesthetics is the only thing that matters). `initial-scale` sets the initial zoom. With the page width matching the device, a basic zoom of 1 makes sense. See [this Mozilla Developer page](https://developer.mozilla.org/en/docs/Mozilla/Mobile/Viewport_meta_tag) for a better description.

```html
<meta name="viewport" content="width=device-width, initial-scale=1">
```

The description meta tag is used by search engines to show a description of the page to a user.
Most search engines don't use the description for the search ranking (it is abusable), they look at the page contents directly.

```html
<meta name="description" content="{% raw %}{{ page.description }}{% endraw %}">
<title>{% raw %}{{ page.title }}{% endraw %}</title>
```

> __Liquid Markup__ 
>
> This is our first encounter with liquid markup. Liquid markup is a templating language, used to arrange the content of the page.
It is processed when Jekyll builds the site.
It has 2 types of tags {% raw %}, `{{ aVariable }}` double braces for output and `{% if %}`{% endraw %} brace with a percent sign for logic commands.
>
> There are some [automatically defined variables provided by Jekyll](http://jekyllrb.com/docs/variables/), which help layout the site and individual pages.
Variables defined in the yaml section at the top of the page can be accessed as a child of the page variable.
The rest of the Liquid Markup used should be self explanatory.

```yaml
---
layout: base
title: "t3hsite, t3hmun's project to learn and make good quality html5 and css/sass with Jekyll."
description: "I don't like other people's themes and I want to learn how make a site properly so it works reliable while being easy to maintain."
---
```

The use of `page.description` and `page.title` means that every page will need the title and description defined in the yaml section, for example the above is the what I put at the top of my `index.html`. This title and description will also be used in the site's own index/archive pages.


```html
{% raw %}<link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">{% endraw %}
```

The canonical url is used by search engines to refer to the main version of a page and ignore duplicate urls. The liquid script removes `index.html` (if present) and adds the full url of the website. This might seem odd until you see the default directory and page structure that Jekyll uses. Canonical is also useful for creating permalink versions of paginated pages (a subject for another day).

>__Directory Named Pages__
>
> Although it is not compulsory Jekyll encourages the the use of directory-named pages instead of pages with file-names. For example `/about/index.html` instead of `/about.html`. The version in the directory can be accessed using just the `/about/` directory as the link; this is what the Liquid markup creates as the canonical link. 
>
> Directory named pages are useful because the extension for the page file can change over time; say you decide to start using PHP, `/about/index.php` would work with the same canonical `/about/` link (well this actually depends on the server configuration).
>
> Also they are shorter, look neat, and can be used to make flowing neat structures like `/about/more-info/` instead of `about-more-info.html`.

```html
 {% raw %}<link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}" />{% endraw %}
```

This simply allows the RSS page to be automatically detected.


And that is the standard head section, complete for any basic page.


## A Primer on HTML5 the Section and Flow Model


### Hierarchy

From the [HTML5 spec](http://www.w3.org/TR/2015/WD-html51-20151003/dom.html#sectioning-content):
 
> Sectioning content is content that defines the scope of headings and footers.
> 
> [`article`](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-article-element) [`aside`](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-aside-element) [`nav`](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-nav-element) [`section`](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-section-element)

Sub-sections are defined by nesting these sectioning tags within one another. The heading ranks should shrink correspondingly.

The `main`, `header` and `footer` tags are __not__ sectioning tags, although they are very useful for logically separating content.
These tags are used by machines to understand the context of high level content.
This is intended to be used by accessibility aids such as screen readers to deliver content appropriately.
This does not seem to be well supported yet so the addition of ARIA (accessibility standards) role attributes helps.
It is also likely to be used by things such as Firefox's reading feature in the future.

`article`
: The article tag is any _self-contained composition_ that may be _suitable for syndication_ as the [spec puts it](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-article-element).
This is not restricted to the English definition of the word article.
Interestingly the spec considers individual blog comments as articles, possibly because they can be thought of a thread of posts.

`section`
: The least specific of the sectioning elements, could be anything that has a heading and is not one of the other sectioning elements.
Often the child of other sectioning elements.

`nav`
: This [spec lists this](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-nav-element) as having 2 main purposes.
Navigation between pages and navigation within a page.
Ideally not all sections of links should be put in nav elements, only the ones immediately important to the site.
This is good for assistive technologies that need to be able to recognise the most salient links for the user in each context.

`aside`
: Used for sidebar or tangential content that is not essential.
The [spec](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#the-aside-element) seems to encourage the use of asides to contain nav elements with lists of links to external sites.

### Magical Headings

In order to support the sectioning model and reduce redundancy in HTML5, the H1 tag is automatically shrunk by one header level for each parent sectioning tag. The idea here is that the designer only uses H1 and lets the hierarchy of sections automatically set the correct heading size. 

This automatic shrinking only affects the H1 tag, the other heading elements maintain their default size. This results in an awkward quirk if sectioning and different header tags are mixed; the H1 tag can appear the same size or smaller than lower rank headers. In order to avoid this the [spec recommends](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#headings-and-sections): 

> Sections may contain headings of any rank, but authors are strongly encouraged to either use only h1 elements, or to use elements of the appropriate rank for the section's nesting level.

This is followed by :

> Authors are also encouraged to explicitly wrap sections in elements of sectioning content, instead of relying on the implicit sections generated by having multiple headings in one element of sectioning content.

Which is suggesting that sections should always be used. But then there is this warning:

>There are currently no known implementations of the outline algorithm in graphical browsers or assistive technology user agents, although the algorithm is implemented in other software such as conformance checkers. Therefore the outline algorithm cannot be relied upon to convey document structure to users. Authors are advised to use heading rank (h1-h6) to convey document structure.

This leaves a single possibility, use a sectioning hierarchy with a range of header tags perfectly reflecting that hierarchy. This also implies that the page as a whole will use the H1, forcing the first sectioning element to begin with H2, consequently the blog post will be forced to start with a H2. If the title of the blog is set as a H1 it will automatically shrink down to H2 size because the blog post will be contained within an `article` sectioning element. In practice this will result in the need for CSS to bump up the header sizes.


## The Base Layout

Start by re-naming `/default.html` to `/base.html`.
The intention of this file is to serve as the base for other files, so the naming should reflect that.

The base file contains the  essential HTML, including the head, header (site masthead), nav (site navigation links) and footer (external links and other information). In the middle is the main section which has a include for content, which could be the content of any page on the website that uses this layout. This is demonstrated in the spec in the [headings section]

This is a small blog site so the contents of the nav and footer are manually arranged. In a larger site with more links this would be done using Liquid Markup, pulling the content from a simple to edit data file.

The leading `<!DOCTYPE html>` is essential as the first test in any HTML5 file. Without it browsers may attempt to interpret the page in some king of compatibility quirk mode, resulting in an unpredictable layout.



```html
{% raw %}<!DOCTYPE html>
<!-- 
This is the base HTML file serves as the template for all pages on the site.

The language of the site is set in the HTML tag. 
Specifying GB so that robots read the page in an British accent.
Useful for translating, spell-checking, screen reading among other things. 
-->
<html lang="en-GB">

  <!-- 
  The head included using Liquid Markup.
  The head is chunky with long lines, much easier to maintain in a separate file.
  Also may get re-used eventually.
  -->
  {% include head.html %}

  <!-- HTML requires all visible content to occur within the body. -->
  <body>
    <!-- 
    The visible content is split between the nav, main and a footer sectioning elements.
    
    Header tag is not needed if the header is fully contained in a h# tag.
    It is conventional (and useful) for the masthead to link to the homepage.
    -->
    <h1><a href="{{ site.url }}{{ site.baseurl }}/">{{ site.title }}</a></h1>

    <!-- The navigation for a personal blog is small. -->
    <nav>
      <a href="{{ site.url }}{{ site.baseurl }}/about/">about</a> -
      <a href="{{ site.url }}{{ site.baseurl }}/archive/">archive</a>
    </nav>

    <!-- 
    Pages using this layout will have their primary content inserted here.
    The main tag helps machines separate the real content from the surrounding fluff.
    A sectioning element should wrap the content in the content file (article or section).
    -->
    <main>
      {{ content }} <!-- It is a variable, not magic. -->
    </main>
    
    <!-- 
    The footer contains unimportant links and external links. 
    Content links live in the nav at the top of the page.
    This is not for navigation but for other things of interest.
    -->
    <footer>
      <br>
      <p>
        <a href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}">RSS</a> 
        -
        <a href="github.com/t3hmun">My Github</a> 
        -
        <a href="t3hmun.github.io">My Main Site</a> 
        - 
        blog <em>at</em> t3hmun <em>dot</em> com
      </p>
    </footer>
  </body>

</html>{% endraw %}
```


## The Post Layout

The template for a blog post is very simple:

```html
{% raw %}---
# Uses the base layout so all of the content from this file will be inserted in the body.
layout: base
---

<!-- 
The base layout has this wrapped in a main section.
This layout contains a single main article. 
-->
<article>
  <!-- 
  This article tag is nested once making the H2 the correct heading level.
  Following the recommendations and warnings in the HTML5.1 spec [1] the header level must follow the section level.
  H1 cannot be used here because the sectioning would cause it to shrink to H2 level.
  [1](http://www.w3.org/TR/2015/WD-html51-20151003/semantics.html#headings-and-sections) - October 2015
  -->
  <h2><a href="{{ page.url | prepend: site.baseurl | prepend: site.url }}">{{ page.title }}</a></h2>
  <!--
  The Kramdown html output of a blog page written in markdown will be inserted as the content variable (the page must reference this file as layout). 
  To ensure that Kramdown begins with the correct heading levels the following option can be inserted in _config.yml.
  kramdown:
    header_offset: 1
  -->
  {{ content }}
</article>
{% endraw %}
```

A the beginning is the yaml from matter, which specifies that this uses the base layout.
That takes care of all of the essential HTML and site masthead, nav and so on.

The post is wrapped in an article tag, because it is an independently coherent section suitable for syndication.

The markdown of a blog post using this layout would be converted to HTML and inserted as the `content` variable.
The `header_offset: 1` build option should have been added to `kramdown:` section of `_config.yml` to ensure its headings follow on from the `h2` title.


## The Index Page

The index page is written in html because it's content is unique and not particularly suited to being written in markdown like blog posts. It uses the base layout like all other pages.

Liquid Markup is used to display the title description and date of the 10 most recent blog posts.



```html
{% raw %}---
layout: base
title: "t3hsite, t3hmun's project to learn and make good quality html5 and css/sass with Jekyll."
description: "This is project to make a reliable, maintainable and most importantly user-friendly theme for Jekyll from scratch, while learning good HTML5 and SASS/CSS."
---

<!-- 
Nothing on this page is an article of any sort.
This is simply a welcome mat.

This description is part of the top level of the site (H1 rank).
-->
<p>{{ page.description }}</p>

<section>
  <!-- The header levels follow sectioning depth. -->
  <h2>Recent Posts</h2>
  <!-- 
  Use Liquid to iterate through the 10 most recent posts in the site.
  The title date and description for each page is also extracted using Liquid. 
  -->
  {% for post in site.posts limit:10 %}

    <section>
      <!-- <header> tag should only be used if the header is more than a single <h#> tag. -->
      <h3><a class="post-link" href="{{ post.url | prepend: site.baseurl | prepend: site.url }}">{{ post.title }}</a></h3>
      <p>{{ post.description }}</p>
      <!-- Footer tag used for information about the article. -->
      <footer>
        Posted on:
        <!-- The datetime attribute contains a machine readable date. -->
        <time datetime="{{ post.date | date: " %F %H:%M " }}">{{ post.date | date: "%F at %H:%M" }}</time>
      </footer>
    </section>

  {% endfor %}

</section>{% endraw %}
```


## Next

If it has not been done already, now is a good time to make some basic test blog posts. Alternatively you can pop over to the [releases page](https://github.com/t3hmun/t3hsite/releases) for this project and grab the zip for this stage.

Next is CSS and SASS. Colour and style, but never forgetting usability.